<div class="login-container">
  <div class="login-card">
    <div class="header">
      <div class="logo-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round" class="feather feather-send">
          <line x1="22" y1="2" x2="11" y2="13"></line>
          <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
        </svg>
      </div>
      <h1 class="title">EasyTrip</h1>
      <p class="subtitle">
        Faça login para planejar sua próxima aventura em grupo.
      </p>
    </div>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
      <div class="form-body">

        @if (((errorMessage()))) {
        <div class="validation-error">
          {{ ((errorMessage())) }}
        </div>
        }

        <div class="form-field">
          <label for="email" class="label">Email</label>
          <input type="email" id="email" name="email" class="input-field" placeholder="seueemail@email.com"
            formControlName="email" />

          @if (email?.invalid && (email?.dirty || email?.touched)) {
          <div class="validation-error">
            @if (email?.errors?.['required']) {
            <span>Email é obrigatório.</span>
            }
            @if (email?.errors?.['email']) {
            <span>Formato de email inválido.</span>
            }
          </div>
          }
        </div>
        <div class="form-field">
          <label for="password" class="label">Senha</label>

          <div class="password-wrapper">
            <input [type]="passwordVisible() ? 'text' : 'password'" id="password" name="password" class="input-field"
              placeholder="Sua senha" formControlName="password" />

            <span class="password-toggle" (click)="togglePasswordVisibility()">
              @if (passwordVisible()) {
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-eye-off">
                <path
                  d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.73-2.16a3 3 0 1 1-4.72-4.72">
                </path>
                <line x1="1" y1="1" x2="23" y2="23"></line>
              </svg>
              } @else {
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-eye">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
              }
            </span>
          </div>

          @if (password?.invalid && (password?.dirty || password?.touched)) {
          <div class="validation-error">
            @if (password?.errors?.['required']) {
            <span>Senha é obrigatória.</span>
            }
            @if (password?.errors?.['minlength']) {
            <span>Mínimo 6 caracteres.</span>
            }
          </div>
          }
        </div>


        <button type="submit" class="submit-button" [disabled]=" isLoading()">
          @if (isLoading()){
          <span>Entrando...</span>
          } @else {
          <span>Entrar</span>
          }
        </button>
      </div>
    </form>

    <div class="divider">
      <p>
        <span class="divider-text">Ou continue com</span>
      </p>
    </div>

    <div class="links">
      <a (click)="navigateToRegister()">Não tem uma conta? Cadastre-se</a>
      <a href="#">Esqueceu sua senha?</a>
    </div>
  </div>
</div>